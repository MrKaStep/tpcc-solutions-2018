# Ring buffer

### Какие чтения/записи упорядочивать?

Упорядочены должны быть `element = std::move(buffer_[curr_head])` и 
`buffer_[curr_tail] = std::move(element)`, причём в обе стороны, так как обе операции модифицируют
ячейку в буфере.

### Гарантия упорядочивания?

*Happens-before* возникает путём записи c `release` в конце каждого метода, и последующего чтения
`head`/`tail` в начале другой операции, что в замыкании с *program-order* даёт искомое отношение.

### Почему нельзя слабее?

Так как необходимы записи с гарантиями, большими чем `relaxed`, в обоих методах, и нужны парные вызовы,
ослабить предложенные гарантии невозможно.