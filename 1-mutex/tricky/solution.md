```
void Lock() {
  while (thread_count_.fetch_add(1) > 0) {
    thread_count_.fetch_sub(1);
  }
}
```

Покажем, что данная реализация не гарантирует глобального прогресса:

1. Поток 0 проходит метод, `thread_count_: 1`.
1. Поток 1 доходит до `fetch_sub`, `thread_count_: 2`.
1. Поток 2 доходит до `fetch_sub`, `thread_count_: 3`.
1. Поток 0 делает `Unlock`, `thread_count_: 2`.

В этой ситуации, если один из потоков 1 или 2 сделает декремент, 
проверит условие и снова зайдёт в тело цикла, система вернётся в исходное
состояние. Таким образом, если потоки будут чередовать прохождение итерации
цикла, никто из них не захватит лок, то есть глобального прогресса нет.
 